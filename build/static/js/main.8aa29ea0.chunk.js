(this["webpackJsonpemphasize-elements"]=this["webpackJsonpemphasize-elements"]||[]).push([[3],{1044:function(e,t){},1132:function(e,t,i){},1133:function(e,t,i){"use strict";i.r(t);var a=i(0),s=i.n(a),n=i(42),l=i.n(n),o=i(380);class AuthorizationClient_SandboxAuthorizationClient extends o.b{constructor(e){super(e),this.authConfig=void 0,this.validateConfiguration(e),this.authConfig=e}validateConfiguration(e){if(!e.clientId)throw new Error("Please add a valid OIDC client id to the .env file and restart the application. See the README for more information.");if(!e.scope)throw new Error("Please add valid scopes for your OIDC client to the .env file and restart the application. See the README for more information.");if(!e.redirectUri)throw new Error("Please add a valid redirect URI to the .env file and restart the application. See the README for more information.")}async signIn(){return o.a.handleSigninCallback(this.authConfig.redirectUri).then((async()=>super.signIn())).catch((e=>console.error(e)))}}const r=new AuthorizationClient_SandboxAuthorizationClient({scope:"imodelaccess:read imodels:read realitydata:read",clientId:"spa-te9aUaImvHiemT98Tkw3Rav7q",redirectUri:"http://localhost:3000/signin-callback",postSignoutRedirectUri:"http://localhost:3000/logout",responseType:"code",authority:"https://ims.bentley.com"}),c={contentManipulationTools:{cornerItem:{hideDefault:!0},hideDefaultHorizontalItems:!1,hideDefaultVerticalItems:!1,verticalItems:{sectionTools:!1,measureTools:!1,selectTool:!1},horizontalItems:{clearSelection:!1,clearHideIsolateEmphasizeElements:!1,isolateElements:!1,hideElements:!1,emphasizeElements:!1}},navigationTools:{hideDefaultHorizontalItems:!1,hideDefaultVerticalItems:!1,verticalItems:{walkView:!0,cameraView:!0},horizontalItems:{rotateView:!0,panView:!0,fitView:!0,windowArea:!0,undoView:!0,redoView:!0}},hideDefaultStatusBar:!0,hidePropertyGrid:!0,hideToolSettings:!0,hideTreeView:!0};var d=i(4),p=i(3),m=i(5),E=i(50),h=i(1181),u=i(1182),g=i(1184),w=i(21);class EmphasizeElementsApi_EmphasizeElementsApi{static emphasizeSelectedElements(e){m.EmphasizeElements.getOrCreate(e).emphasizeSelectedElements(e)}static clearEmphasizedElements(e){m.EmphasizeElements.getOrCreate(e).clearEmphasizedElements(e)}static hideSelectedElements(e){m.EmphasizeElements.getOrCreate(e).hideSelectedElements(e)}static clearHiddenElements(e){m.EmphasizeElements.getOrCreate(e).clearHiddenElements(e)}static isolateSelectedElements(e){m.EmphasizeElements.getOrCreate(e).isolateSelectedElements(e)}static clearIsolatedElements(e){m.EmphasizeElements.getOrCreate(e).clearIsolatedElements(e)}static overrideSelectedElements(e,t){m.EmphasizeElements.getOrCreate(t).overrideSelectedElements(t,e,p.FeatureOverrideType.ColorOnly,!1,!0)}static clearOverriddenElements(e){m.EmphasizeElements.getOrCreate(e).clearOverriddenElements(e)}}i(822);var S,f=i(72);!function(e){e.Emphasize="Emphasize",e.Isolate="Isolate",e.Hide="Hide",e.Override="Color"}(S||(S={}));const EmphasizeElementsWidget=()=>{const[e,t]=s.a.useState(!0),[i,n]=s.a.useState(!1),[l,o]=s.a.useState(!1),[r,c]=s.a.useState(!1),[d,C]=s.a.useState(!1),[y,v]=s.a.useState(p.ColorDef.red);Object(a.useEffect)((()=>(w.b.selection.selectionChange.addListener(_onSelectionChanged),()=>{const e=m.IModelApp.viewManager.selectedView;if(void 0===e)return;const t=m.EmphasizeElements.getOrCreate(e);t.clearEmphasizedElements(e),t.clearHiddenElements(e),t.clearIsolatedElements(e),t.clearOverriddenElements(e)})),[]);const _onSelectionChanged=(e,i)=>{const a=i.getSelection(e.imodel,e.level);t(a.isEmpty)},_handleActionButton=e=>{const t=m.IModelApp.viewManager.selectedView;if(void 0!==t)switch(e){default:case S.Emphasize:EmphasizeElementsApi_EmphasizeElementsApi.emphasizeSelectedElements(t),n(!0);break;case S.Isolate:EmphasizeElementsApi_EmphasizeElementsApi.isolateSelectedElements(t),c(!0);break;case S.Hide:EmphasizeElementsApi_EmphasizeElementsApi.hideSelectedElements(t),o(!0);break;case S.Override:EmphasizeElementsApi_EmphasizeElementsApi.overrideSelectedElements(y,t),C(!0)}},_handleClearButton=e=>{const t=m.IModelApp.viewManager.selectedView;if(void 0!==t)switch(e){default:case S.Emphasize:EmphasizeElementsApi_EmphasizeElementsApi.clearEmphasizedElements(t),n(!1);break;case S.Isolate:EmphasizeElementsApi_EmphasizeElementsApi.clearIsolatedElements(t),c(!1);break;case S.Hide:EmphasizeElementsApi_EmphasizeElementsApi.clearHiddenElements(t),o(!1);break;case S.Override:EmphasizeElementsApi_EmphasizeElementsApi.clearOverriddenElements(t),C(!1)}};return Object(f.jsxs)("div",{className:"sample-options",children:[Object(f.jsxs)("div",{className:"sample-grid",children:[Object(f.jsxs)("div",{className:"control",children:[Object(f.jsx)(h.a,{children:"Emphasize"}),Object(f.jsx)("span",{}),Object(f.jsx)(u.a,{size:"small",styleType:"cta",onClick:()=>_handleActionButton(S.Emphasize),disabled:e,children:"Apply"}),Object(f.jsx)(u.a,{size:"small",styleType:"cta",onClick:()=>_handleClearButton(S.Emphasize),disabled:!i,children:"Clear"})]}),Object(f.jsxs)("div",{className:"control",children:[Object(f.jsx)(h.a,{children:"Hide"}),Object(f.jsx)("span",{}),Object(f.jsx)(u.a,{size:"small",styleType:"cta",onClick:()=>_handleActionButton(S.Hide),disabled:e,children:"Apply"}),Object(f.jsx)(u.a,{size:"small",styleType:"cta",onClick:()=>_handleClearButton(S.Hide),disabled:!l,children:"Clear"})]}),Object(f.jsxs)("div",{className:"control",children:[Object(f.jsx)(h.a,{children:"Isolate"}),Object(f.jsx)("span",{}),Object(f.jsx)(u.a,{size:"small",styleType:"cta",onClick:()=>_handleActionButton(S.Isolate),disabled:e,children:"Apply"}),Object(f.jsx)(u.a,{size:"small",styleType:"cta",onClick:()=>_handleClearButton(S.Isolate),disabled:!r,children:"Clear"})]}),Object(f.jsxs)("div",{className:"control",children:[Object(f.jsx)(h.a,{children:"Override"}),Object(f.jsx)(E.c,{initialColor:y,onColorPick:e=>{v(e)},disabled:e}),Object(f.jsx)(u.a,{size:"small",styleType:"cta",onClick:()=>_handleActionButton(S.Override),disabled:e,children:"Apply"}),Object(f.jsx)(u.a,{size:"small",styleType:"cta",onClick:()=>_handleClearButton(S.Override),disabled:!d,children:"Clear"})]})]}),Object(f.jsx)(g.a,{type:"informational",className:"instructions",children:"Select one or more elements. Click one of the Apply buttons"})]})};var C=i(15);const y={BingMaps:{key:"key",value:""},MapboxImagery:{key:"access_token",value:""}};var v=i(517),b=i(1),I=i(2);const z="DRWR04-S3";class ViewSetup_ViewSetup{static async getFirstViewDefinitionId(e){const t=await e.views.queryDefaultViewId();if(b.Id64.isValid(t))return t;const i=await e.views.getViewList({from:m.SpatialViewState.classFullName});if(i.length>0)return i[0].id;const a=await e.views.getViewList({from:m.DrawingViewState.classFullName});if(a.length>0)return a[0].id;throw new Error("No valid view definitions in imodel")}static getAspectRatio(){const e=document.getElementById("sample-container");if(null!==e)return e.clientWidth/e.clientHeight}static async overrideView(e,t){const i=ViewSetup_ViewSetup.getAspectRatio();if(void 0!==i&&t.adjustAspectRatio(i),t.viewFlags=t.viewFlags.copy({shadows:!1,grid:!1,visibleEdges:!1}),t.is3d()){const i=t.getDisplayStyle3d();i.changeBackgroundMapProps({useDepthBuffer:!0});const a=await ViewSetup_ViewSetup.getGroundBias(e);if(a&&i.changeBackgroundMapProps({groundBias:a}),i.environment=p.Environment.fromJSON({sky:{display:!0,twoColor:!0,zenithColor:p.ColorDef.computeTbgrFromString("#DEF2FF"),nadirColor:p.ColorDef.computeTbgrFromString("#F0ECE8")}}),"Metrostation2"===e.name||e.name===z){const t=await ViewSetup_ViewSetup.getModelIds(e),a=await this.getSubCategoryIds(e,"S-SLAB-CONC");let s=p.PlanarClipMaskSettings.create({subCategoryIds:a,modelIds:t});s=s.clone({mode:p.PlanarClipMaskMode.IncludeSubCategories}),i.changeBackgroundMapProps({planarClipMask:s.toJSON()})}}if(t.isSpatialView()){const i=t.getDisplayStyle3d();if("Stadium"===e.name){const a=await ViewSetup_ViewSetup.getModelIds(e,"SS_MasterLandscape.dgn, LandscapeModel");i.changeBackgroundMapProps({planarClipMask:p.PlanarClipMaskSettings.create({modelIds:a}).toJSON(),transparency:.01});(await ViewSetup_ViewSetup.getModelIds(e,"SS_Master","SS_Master_Structural.dgn, 3D Metric Design","LandscapeDetails.dgn, 3D Metric Design","Stencil Model-4-LandscapeModel, SS_MasterLandscape, SS_MasterLandscape.dgn, Road_Marking")).forEach((e=>t.modelSelector.dropModels(e)))}if(e.name===z){(await ViewSetup_ViewSetup.getModelIds(e)).forEach((e=>t.modelSelector.addModels(e)));(await ViewSetup_ViewSetup.getModelIds(e,"Geotechnical Investigation, DRWR04-GEO-00-XX-M3-G-00001.dgn, 3d")).forEach((e=>t.modelSelector.dropModels(e))),t.setOrigin({x:85.69962649857428,y:-73.80364503759616,z:-82.72194576398469}),t.setExtents({x:144.70409923774804,y:150.2952419865793,z:151.43496224165358}),t.setRotation(I.J.fromJSON([-.8568887533689478,.5155013718214635,-1178475644302565e-30,-.18679591952287192,-.31050028450708866,.9320390859672258,.48046742740732745,.7986538104655898,.36235775447667495]))}}const a=await ViewSetup_ViewSetup.getShownCategories(e);a&&t.categorySelector.addCategories(a);const s=await ViewSetup_ViewSetup.getHiddenCategories(e);s&&t.categorySelector.dropCategories(s)}static async getModelIds(e){const t=new Set;if(!e.isClosed){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];const n="SELECT ECInstanceId FROM Bis:PhysicalPartition"+(a.length>0?` WHERE codeValue IN ('${a.join("','")}')`:"");for await(const i of e.query(n))t.add(i[0])}return t}static async getSubCategoryIds(e){const t=new Set;if(!e.isClosed){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];const n=`SELECT ECInstanceId as id\n                                    FROM BisCore.SubCategory\n                                    WHERE Parent.Id IN (\n                                      SELECT ECInstanceId\n                                      FROM BisCore.SpatialCategory\n                                      ${a.length>0?`WHERE CodeValue IN ('${a.join("','")}')`:""})`;for await(const i of e.query(n))t.add(i[0])}return t}}ViewSetup_ViewSetup.getDefaultView=async e=>{const t=await ViewSetup_ViewSetup.getFirstViewDefinitionId(e),i=await e.views.load(t);return await ViewSetup_ViewSetup.overrideView(e,i),i},ViewSetup_ViewSetup.getHiddenCategories=async e=>{const t=[],addIdsByCategory=async function(){if(!e.isClosed){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];const n=`SELECT ECInstanceId FROM bis.Category WHERE CodeValue IN ('${a.join("','")}')`;for await(const i of e.query(n))t.push(i.id)}};return"house bim upload"===e.name&&await addIdsByCategory("Callouts"),"Metrostation2"!==e.name&&e.name!==z||await addIdsByCategory("A-FLOR-OTLN","A-Reserved Retail Area","G-ANNO-SYMB","A-SITE","S-BEAM-CONC"),t},ViewSetup_ViewSetup.getShownCategories=async e=>{const t=[];return e.name===z&&await(async()=>{if(!e.isClosed){const i="SELECT ECInstanceId FROM bis.Category";for await(const a of e.query(i))t.push(a.id)}})(),t},ViewSetup_ViewSetup.getGroundBias=async e=>{if(e.name===z)return 3};const O=[new class EmphasizeElementsWidget_EmphasizeElementsWidgetProvider{constructor(){this.id="EmphasizeElementsWidgetProvider"}provideWidgets(e,t,i,a){const s=[];return i===d.v.Bottom&&s.push({id:"EmphasizeElementsWidget",label:"Emphasize Elements Selector",defaultState:d.P.Open,getWidgetContent:()=>Object(f.jsx)(EmphasizeElementsWidget,{})}),s}}],V={viewState:ViewSetup_ViewSetup.getDefaultView};C.u.onFrontstageReadyEvent.addListener((e=>{const{bottomPanel:t}=e.frontstageDef;t&&(t.size=180)}));var src_EmphasizeElementsApp=()=>(Object(a.useEffect)((()=>{r.signIn()}),[]),Object(f.jsx)(v.a,{iTwinId:"70d0f847-6e15-4bb8-b617-9f6d0085ee96",iModelId:"de0a3493-c310-4d57-95a4-342ef9f33ddf",authClient:r,enablePerformanceMonitors:!0,viewportOptions:V,mapLayerOptions:y,defaultUiConfig:c,uiProviders:O,theme:"dark"}));i(1132);l.a.render(Object(f.jsx)(src_EmphasizeElementsApp,{}),document.getElementById("root"))},364:function(e,t){},365:function(e,t){},448:function(e,t){},452:function(e,t){},581:function(e,t){},586:function(e,t){},592:function(e,t){},594:function(e,t){},822:function(e,t,i){}},[[1133,5,6]]]);
//# sourceMappingURL=main.8aa29ea0.chunk.js.map